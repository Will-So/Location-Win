{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Best Location{% endblock %}

{% block head %}
{{ super() }}
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <script type=text/javascript>
    $(function() {
      $('a#calculate').bind('click', function() {
        $.getJSON('/__handle_prediciton', {
          a: $('input[name="a"]').val(),
          b: $('input[name="b"]').val()
        }, function(data) {
          $("#result").text(data.result);
        });
        return false;
      });
    });
  </script>
{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Hello, Stranger!</h1>
</div>
<div>
</div>
<div class="col-md-3">
    {{ wtf.quick_form(form)}}
</div>

<div class="col-md-9">
    <h2>Best Locations:</h2>
 <div id="map">

    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
     <script type="text/javascript">
         // init funciton
         (function (){
                  var latlon = [];

         })();
         // Load city coordinates:



         var map = L.map('map').setView([36.1215, -115.1739], 11);

                 L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

//        L.marker([51.5, -0.09]).addTo(map)
//            .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
//            .openPopup();
         //get the clicked on location on the map.
         map.on('click', function(e) {
            console.log(e.latlng);
             latlon = [e.latlng.lat, e.latlng.lng];
            });

    // Getting map navigation to work properl
    document.getElementById('city').onclick = function(e) {
        var pos = e.target.getAttribute('data-position');
        var zoom = e.target.getAttribute('data-zoom');
        if (pos && zoom) {
            var loc = pos.split(',');
            var z = parseInt(zoom);
            map.panTo($(this).attr("value"));
//            map.setView(new L.LatLng("value"))
            return false;
    }
}
         $('#city').on('click', function(e){
             e.preventDefault();
             console.log($(this).attr("value"))
             map.panTo($(this).attr("value"));
         })
     </script>
</div>
     <p>Where Green is best and Red is worst</p>
</div>


{% if pagination %}
<div class="pagination">
</div>
{% endif %}
{% endblock %}


{% block scripts %}
{{ super() }}


{% endblock %}
